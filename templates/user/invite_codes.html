{% extends "user/base.html" %}

{% block page_title %}é‚€è¯·å¥½å‹{% endblock %}

{% block content %}
<!-- ç»Ÿè®¡ä¿¡æ¯ -->
<div class="stats-grid">
    <div class="stat-card-compact">
        <div class="stat-icon" style="color: #667eea;">ğŸ‘¥</div>
        <div class="stat-number">{{ stats.total_generated or 0 }}</div>
        <div class="stat-label">æ€»ç”Ÿæˆæ•°</div>
    </div>
    
    <div class="stat-card-compact">
        <div class="stat-icon" style="color: #28a745;">âœ…</div>
        <div class="stat-number">{{ stats.total_invites or 0 }}</div>
        <div class="stat-label">å·²ä½¿ç”¨</div>
    </div>
    
    <div class="stat-card-compact">
        <div class="stat-icon" style="color: #ffc107;">â³</div>
        <div class="stat-number">{{ invite_codes|length if invite_codes else 0 }}</div>
        <div class="stat-label">å‰©ä½™å¯ç”¨</div>
    </div>
    
    <div class="stat-card-compact">
        <div class="stat-icon" style="color: #17a2b8;">ğŸ</div>
        <div class="stat-number">7å¤©</div>
        <div class="stat-label">å¥–åŠ±å¤©æ•°</div>
    </div>
</div>

<!-- é‚€è¯·å¥–åŠ±è¯´æ˜ -->
<div class="card-compact reward-card">
    <div class="card-header-compact">
        <h2 class="card-title-compact">ğŸ é‚€è¯·å¥–åŠ±æœºåˆ¶</h2>
    </div>
    
    <div class="reward-content">
        <div class="reward-item">
            <span class="reward-icon">ğŸ‘¤</span>
            <div class="reward-text">
                <strong>é‚€è¯·å¥½å‹æ³¨å†Œ</strong>
                <p>æ¯æˆåŠŸé‚€è¯·ä¸€ä½å¥½å‹æ³¨å†Œï¼Œæ‚¨å’Œå¥½å‹éƒ½å°†è·å¾—é¢å¤–çš„æœ‰æ•ˆæœŸå¥–åŠ±</p>
            </div>
        </div>
        
        <div class="reward-item">
            <span class="reward-icon">â°</span>
            <div class="reward-text">
                <strong>æœ‰æ•ˆæœŸå»¶é•¿</strong>
                <p>æ ¹æ®é‚€è¯·æ•°é‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºæ‚¨çš„è´¦æˆ·å»¶é•¿ç›¸åº”çš„æœ‰æ•ˆæœŸå¤©æ•°</p>
            </div>
        </div>
        
        <div class="reward-item">
            <span class="reward-icon">ğŸ”„</span>
            <div class="reward-text">
                <strong>åŒå‘å¥–åŠ±</strong>
                <p>é‚€è¯·è€…å’Œè¢«é‚€è¯·è€…éƒ½èƒ½è·å¾—å¥–åŠ±ï¼Œå®ç°äº’åˆ©å…±èµ¢</p>
            </div>
        </div>
    </div>
</div>

<!-- ç”Ÿæˆé‚€è¯·ç  -->
<div class="card-compact">
    <div class="card-header-compact">
        <h2 class="card-title-compact">ğŸ”— ç”Ÿæˆé‚€è¯·ç </h2>
    </div>
    
    <div class="generate-section">
        <div class="generate-info">
            <div class="info-item">
                <span class="info-icon">ğŸ“</span>
                <span class="info-text">æ¯ä¸ªç”¨æˆ·æœ€å¤šå¯ç”Ÿæˆ <strong>10ä¸ª</strong> é‚€è¯·ç </span>
            </div>
            <div class="info-item">
                <span class="info-icon">â±ï¸</span>
                <span class="info-text">é‚€è¯·ç æ°¸ä¹…æœ‰æ•ˆï¼Œå¯é‡å¤ä½¿ç”¨</span>
            </div>
            <div class="info-item">
                <span class="info-icon">ğŸ¯</span>
                <span class="info-text">åˆ†äº«ç»™å¥½å‹ï¼Œå…±åŒäº«å—é¢„æµ‹ä¹è¶£</span>
            </div>
        </div>
        
        {% set total_codes = invite_codes|length if invite_codes else 0 %}
        {% if total_codes < 10 %}
        <form method="POST" action="{{ url_for('user.generate_invite_code') }}" class="generate-form">
            <button type="submit" class="generate-btn">
                <span class="btn-icon">âœ¨</span>
                <span class="btn-text">ç”Ÿæˆæ–°çš„é‚€è¯·ç </span>
            </button>
        </form>
        {% else %}
        <div class="limit-notice">
            <span class="notice-icon">âš ï¸</span>
            <span class="notice-text">æ‚¨å·²è¾¾åˆ°é‚€è¯·ç ç”Ÿæˆä¸Šé™ï¼ˆ10ä¸ªï¼‰</span>
        </div>
        {% endif %}
    </div>
</div>

<!-- æˆ‘çš„é‚€è¯·ç  -->
<div class="card-compact">
    <div class="card-header-compact">
        <h2 class="card-title-compact">ğŸ“‹ æˆ‘çš„é‚€è¯·ç </h2>
    </div>
    
    {% if invite_codes %}
    <div class="invite-codes-grid">
        {% for code in invite_codes %}
        <div class="invite-code-item {% if code.is_used %}used{% endif %}">
            <div class="code-header">
                <div class="code-status">
                    {% if code.is_used %}
                    <span class="status-badge used">âœ… å·²ä½¿ç”¨</span>
                    {% else %}
                    <span class="status-badge available">ğŸ”¥ å¯ç”¨</span>
                    {% endif %}
                </div>
                <div class="code-date">
                    {{ code.created_at.strftime('%m-%d %H:%M') }}
                </div>
            </div>
            
            <div class="code-content">
                <div class="code-value" onclick="copyToClipboard('{{ code.code }}', this)">
                    <span class="code-text">{{ code.code }}</span>
                    <span class="copy-icon">ğŸ“‹</span>
                </div>
                
                {% if code.is_used and code.used_by_user %}
                <div class="used-info">
                    <span class="used-icon">ğŸ‘¤</span>
                    <span class="used-text">è¢«ç”¨æˆ· <strong>{{ code.used_by_user.username }}</strong> ä½¿ç”¨</span>
                </div>
                {% endif %}
            </div>
            
            <div class="code-actions">
                <button onclick="shareInviteCode('{{ code.code }}')" class="action-btn share-btn">
                    <span class="btn-icon">ğŸ“¤</span>
                    <span class="btn-text">åˆ†äº«</span>
                </button>
                
                <button onclick="copyInviteLink('{{ code.code }}')" class="action-btn copy-btn">
                    <span class="btn-icon">ğŸ”—</span>
                    <span class="btn-text">å¤åˆ¶é“¾æ¥</span>
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">ğŸ“</div>
        <h3 class="empty-title">æ²¡æœ‰å¯ç”¨çš„é‚€è¯·ç </h3>
        <p class="empty-text">
            {% if stats.total_generated > 0 %}
            æ‚¨çš„é‚€è¯·ç å·²å…¨éƒ¨ä½¿ç”¨ï¼Œå¯ä»¥ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”Ÿæˆæ–°çš„é‚€è¯·ç ï¼
            {% else %}
            ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”Ÿæˆæ‚¨çš„ç¬¬ä¸€ä¸ªé‚€è¯·ç å§ï¼
            {% endif %}
        </p>
    </div>
    {% endif %}
</div>

<!-- ä½¿ç”¨è¯´æ˜ -->
<div class="card-compact">
    <div class="card-header-compact">
        <h2 class="card-title-compact">ğŸ“– ä½¿ç”¨è¯´æ˜</h2>
    </div>
    
    <div class="help-content">
        <div class="help-section">
            <h4 class="help-title">ğŸ¯ å¦‚ä½•é‚€è¯·å¥½å‹</h4>
            <ol class="help-list">
                <li>ç‚¹å‡»"ç”Ÿæˆæ–°çš„é‚€è¯·ç "æŒ‰é’®åˆ›å»ºé‚€è¯·ç </li>
                <li>å¤åˆ¶é‚€è¯·ç æˆ–é‚€è¯·é“¾æ¥åˆ†äº«ç»™å¥½å‹</li>
                <li>å¥½å‹åœ¨æ³¨å†Œæ—¶è¾“å…¥æ‚¨çš„é‚€è¯·ç </li>
                <li>æ³¨å†ŒæˆåŠŸåï¼ŒåŒæ–¹éƒ½å°†è·å¾—å¥–åŠ±</li>
            </ol>
        </div>
        
        <div class="help-section">
            <h4 class="help-title">ğŸ’¡ æ¸©é¦¨æç¤º</h4>
            <ul class="help-list">
                <li>æ¯ä¸ªé‚€è¯·ç å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·ä½¿ç”¨</li>
                <li>é‚€è¯·ç æ°¸ä¹…æœ‰æ•ˆï¼Œè¯·å¦¥å–„ä¿ç®¡</li>
                <li>ç‚¹å‡»é‚€è¯·ç å¯ä»¥å¿«é€Ÿå¤åˆ¶åˆ°å‰ªè´´æ¿</li>
                <li>åˆ†äº«é“¾æ¥åŒ…å«å®Œæ•´çš„æ³¨å†Œåœ°å€</li>
            </ul>
        </div>
    </div>
</div>

<style>
/* ç»§æ‰¿dashboardçš„åŸºç¡€æ ·å¼ */
.card-compact {
    background: linear-gradient(135deg, #fff 0%, #f8f9ff 100%);
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(102, 126, 234, 0.1);
    margin-bottom: 1rem;
    overflow: hidden;
}

.card-header-compact {
    padding: 0.8rem 1.2rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.card-title-compact {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
}

.stat-card-compact {
    background: linear-gradient(135deg, #fff 0%, #f8f9ff 100%);
    border-radius: 12px;
    padding: 1rem;
    text-align: center;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(102, 126, 234, 0.1);
    transition: all 0.3s ease;
    min-height: 120px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.stat-card-compact:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.stat-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.stat-number {
    font-size: 1.8rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 0.3rem;
}

.stat-label {
    font-size: 0.9rem;
    color: #666;
    font-weight: 500;
}

/* å¥–åŠ±å¡ç‰‡ */
.reward-card {
    background: linear-gradient(135deg, #e8f5e8 0%, #f0fff0 100%);
    border-left: 4px solid #28a745;
}

.reward-content {
    padding: 1.2rem;
    display: grid;
    gap: 1rem;
}

.reward-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    transition: all 0.3s ease;
}

.reward-item:hover {
    background: rgba(255, 255, 255, 0.9);
    transform: translateX(5px);
}

.reward-icon {
    font-size: 2rem;
    flex-shrink: 0;
}

.reward-text strong {
    color: #28a745;
    font-size: 1.1rem;
    display: block;
    margin-bottom: 0.3rem;
}

.reward-text p {
    margin: 0;
    color: #666;
    font-size: 0.9rem;
    line-height: 1.4;
}

/* ç”ŸæˆåŒºåŸŸ */
.generate-section {
    padding: 1.2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 2rem;
}

.generate-info {
    flex: 1;
    display: grid;
    gap: 0.5rem;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    color: #666;
}

.info-icon {
    font-size: 1.1rem;
}

.generate-form {
    flex-shrink: 0;
}

.generate-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
}

.generate-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
}

.btn-icon {
    font-size: 1.2rem;
}

.limit-notice {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
    color: white;
    border-radius: 8px;
    font-weight: 600;
}

.notice-icon {
    font-size: 1.2rem;
}

/* é‚€è¯·ç ç½‘æ ¼ */
.invite-codes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
    padding: 1.2rem;
}

.invite-code-item {
    background: linear-gradient(135deg, #fff 0%, #f8f9ff 100%);
    border: 2px solid rgba(102, 126, 234, 0.1);
    border-radius: 12px;
    padding: 1rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.invite-code-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-color: rgba(102, 126, 234, 0.3);
}

.invite-code-item.used {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-color: rgba(108, 117, 125, 0.2);
}

.invite-code-item.used::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #6c757d 0%, #495057 100%);
}

.invite-code-item:not(.used)::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #28a745 0%, #20c997 100%);
}

.code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.8rem;
}

.status-badge {
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}

.status-badge.available {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
}

.status-badge.used {
    background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
    color: white;
}

.code-date {
    font-size: 0.8rem;
    color: #666;
}

.code-content {
    margin-bottom: 1rem;
}

.code-value {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.8rem;
    background: rgba(102, 126, 234, 0.1);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 0.5rem;
}

.code-value:hover {
    background: rgba(102, 126, 234, 0.2);
    transform: scale(1.02);
}

.code-text {
    font-family: 'Courier New', monospace;
    font-size: 1.1rem;
    font-weight: 700;
    color: #667eea;
    letter-spacing: 1px;
}

.copy-icon {
    font-size: 1.2rem;
    opacity: 0.7;
    transition: all 0.3s ease;
}

.code-value:hover .copy-icon {
    opacity: 1;
    transform: scale(1.1);
}

.used-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: #666;
    padding: 0.5rem 0.8rem;
    background: rgba(108, 117, 125, 0.1);
    border-radius: 6px;
}

.used-icon {
    font-size: 1rem;
}

.code-actions {
    display: flex;
    gap: 0.5rem;
}

.action-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.3rem;
    padding: 0.6rem;
    border: none;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.share-btn {
    background: linear-gradient(135deg, #17a2b8 0%, #6f42c1 100%);
    color: white;
}

.copy-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.action-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* ç©ºçŠ¶æ€ */
.empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: #666;
}

.empty-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    opacity: 0.5;
}

.empty-title {
    margin: 0 0 0.5rem 0;
    font-size: 1.3rem;
    color: #333;
}

.empty-text {
    margin: 0;
    font-size: 0.9rem;
    line-height: 1.4;
}

/* å¸®åŠ©å†…å®¹ */
.help-content {
    padding: 1.2rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.help-section {
    background: rgba(102, 126, 234, 0.05);
    padding: 1rem;
    border-radius: 8px;
    border-left: 3px solid #667eea;
}

.help-title {
    margin: 0 0 0.8rem 0;
    color: #667eea;
    font-size: 1rem;
    font-weight: 600;
}

.help-list {
    margin: 0;
    padding-left: 1.2rem;
    color: #666;
    font-size: 0.9rem;
    line-height: 1.5;
}

.help-list li {
    margin-bottom: 0.3rem;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .generate-section {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
    }
    
    .invite-codes-grid {
        grid-template-columns: 1fr;
    }
    
    .help-content {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .code-actions {
        flex-direction: column;
    }
}

/* å¤åˆ¶æˆåŠŸæç¤º */
.copy-success {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    animation: slideInRight 0.3s ease-out;
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(100px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}
</style>

<script>
// å¤åˆ¶åˆ°å‰ªè´´æ¿
function copyToClipboard(text, element) {
    // ä½¿ç”¨é™çº§æ–¹æ¡ˆï¼Œç¡®ä¿åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­éƒ½èƒ½å·¥ä½œ
    const textArea = document.createElement('textarea');
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.select();
    
    try {
        document.execCommand('copy');
        showCopySuccess('é‚€è¯·ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        
        // æ·»åŠ å¤åˆ¶åŠ¨ç”»æ•ˆæœ
        if (element) {
            element.style.background = 'rgba(40, 167, 69, 0.2)';
            setTimeout(() => {
                element.style.background = 'rgba(102, 126, 234, 0.1)';
            }, 300);
        }
    } catch (err) {
        console.error('å¤åˆ¶å¤±è´¥:', err);
        showCopySuccess('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶', 'error');
    } finally {
        document.body.removeChild(textArea);
    }
}

// å¤„ç†ç”Ÿæˆé‚€è¯·ç è¡¨å•æäº¤
document.addEventListener('DOMContentLoaded', function() {
    const generateForm = document.querySelector('.generate-form');
    if (generateForm) {
        generateForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            fetch('{{ url_for("user.generate_invite_code") }}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showCopySuccess('é‚€è¯·ç ç”ŸæˆæˆåŠŸï¼');
                    // åˆ·æ–°é¡µé¢æ˜¾ç¤ºæ–°ç”Ÿæˆçš„é‚€è¯·ç 
                    window.location.reload();
                } else {
                    showCopySuccess(data.message, 'error');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showCopySuccess('ç”Ÿæˆé‚€è¯·ç æ—¶å‡ºé”™ï¼Œè¯·ç¨åå†è¯•', 'error');
            });
        });
    }
});

// åˆ†äº«é‚€è¯·ç 
function shareInviteCode(code) {
    // ä½¿ç”¨å½“å‰éƒ¨ç½²çš„URLä½œä¸ºåŸºç¡€ï¼Œç¡®ä¿é“¾æ¥å¯è®¿é—®
    const baseUrl = window.location.origin;
    const text = `ğŸ¯ é‚€è¯·æ‚¨åŠ å…¥AIæ•°æ®åˆ†æé¢„æµ‹ç³»ç»Ÿï¼\n\né‚€è¯·ç ï¼š${code}\n\næ³¨å†Œåœ°å€ï¼š${baseUrl}/register\n\nä½¿ç”¨é‚€è¯·ç æ³¨å†Œï¼Œæˆ‘ä»¬éƒ½èƒ½è·å¾—é¢å¤–å¥–åŠ±å“¦ï¼`;
    
    if (navigator.share) {
        navigator.share({
            title: 'AIæ•°æ®åˆ†æé¢„æµ‹ç³»ç»Ÿé‚€è¯·',
            text: text
        }).catch(err => {
            console.error('åˆ†äº«å¤±è´¥:', err);
            copyToClipboard(text);
            showCopySuccess('é‚€è¯·ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        });
    } else {
        copyToClipboard(text);
        showCopySuccess('é‚€è¯·ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
    }
}

// å¤åˆ¶é‚€è¯·é“¾æ¥
function copyInviteLink(code) {
    // ä½¿ç”¨å½“å‰éƒ¨ç½²çš„URLä½œä¸ºåŸºç¡€ï¼Œç¡®ä¿é“¾æ¥å¯è®¿é—®
    const baseUrl = window.location.origin;
    const link = `${baseUrl}/register?invite_code=${code}`;
    copyToClipboard(link, null);
    showCopySuccess('é‚€è¯·é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
}

// æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
function showCopySuccess(message, type = 'success') {
    // ç§»é™¤å·²å­˜åœ¨çš„æç¤º
    const existing = document.querySelector('.copy-success');
    if (existing) {
        existing.remove();
    }
    
    // åˆ›å»ºæ–°æç¤º
    const toast = document.createElement('div');
    toast.className = 'copy-success';
    
    if (type === 'error') {
        toast.style.background = 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)';
    }
    
    toast.innerHTML = `
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <span style="font-size: 1.2rem;">${type === 'success' ? 'âœ…' : 'âŒ'}</span>
            <span>${message}</span>
        </div>
    `;
    
    document.body.appendChild(toast);
    
    // 3ç§’åè‡ªåŠ¨ç§»é™¤
    setTimeout(() => {
        toast.style.animation = 'slideInRight 0.3s ease-out reverse';
        setTimeout(() => {
            if (toast.parentNode) {
                toast.parentNode.removeChild(toast);
            }
        }, 300);
    }, 3000);
}
</script>
{% endblock %}