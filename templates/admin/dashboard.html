{% extends "admin/base.html" %}

{% block page_title %}管理员控制台{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">📊 系统概览和快速操作</h2>
        <p style="color: #666; margin: 0; font-size: 0.95rem;">系统概览和快速操作</p>
    </div>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2.5rem; margin-bottom: 1rem; color: #667eea;">👥</div>
            <div class="stat-number">{{ stats.total_users }}</div>
            <div class="stat-label">总用户数</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2.5rem; margin-bottom: 1rem; color: #28a745;">✅</div>
            <div class="stat-number">{{ stats.active_users }}</div>
            <div class="stat-label">已激活用户</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2.5rem; margin-bottom: 1rem; color: #dc3545;">❌</div>
            <div class="stat-number">{{ stats.inactive_users }}</div>
            <div class="stat-label">未激活用户</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2.5rem; margin-bottom: 1rem; color: #ffc107;">🔑</div>
            <div class="stat-number">{{ stats.available_codes }}</div>
            <div class="stat-label">可用激活码</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2.5rem; margin-bottom: 1rem; color: #17a2b8;">📈</div>
            <div class="stat-number">{{ "%.1f"|format(stats.avg_accuracy) }}%</div>
            <div class="stat-label">平均准确率</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2.5rem; margin-bottom: 1rem; color: #6f42c1;">🎲</div>
            <div class="stat-number">{{ "%.1f"|format(stats.random_accuracy) }}%</div>
            <div class="stat-label">随机预测准确率</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2.5rem; margin-bottom: 1rem; color: #fd7e14;">⚖️</div>
            <div class="stat-number">{{ "%.1f"|format(stats.balanced_accuracy) }}%</div>
            <div class="stat-label">均衡预测准确率</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2.5rem; margin-bottom: 1rem; color: #e83e8c;">🧠</div>
            <div class="stat-number">{{ "%.1f"|format(stats.ai_accuracy) }}%</div>
            <div class="stat-label">AI智能预测准确率</div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">🎫 邀请系统统计</h2>
    </div>
    
    <div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2rem; margin-bottom: 0.5rem; color: #667eea;">🎫</div>
            <div class="stat-number">{{ invite_stats.total_codes }}</div>
            <div class="stat-label">总邀请码数</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2rem; margin-bottom: 0.5rem; color: #28a745;">✅</div>
            <div class="stat-number">{{ invite_stats.used_codes }}</div>
            <div class="stat-label">已使用邀请码</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2rem; margin-bottom: 0.5rem; color: #ffc107;">⏳</div>
            <div class="stat-number">{{ invite_stats.unused_codes }}</div>
            <div class="stat-label">未使用邀请码</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2rem; margin-bottom: 0.5rem; color: #dc3545;">⏰</div>
            <div class="stat-number">{{ invite_stats.expired_codes }}</div>
            <div class="stat-label">已过期邀请码</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2rem; margin-bottom: 0.5rem; color: #17a2b8;">👥</div>
            <div class="stat-number">{{ invite_stats.invited_users }}</div>
            <div class="stat-label">被邀请用户数</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="font-size: 2rem; margin-bottom: 0.5rem; color: #6f42c1;">📊</div>
            <div class="stat-number">{{ "%.1f"|format(invite_stats.usage_rate) }}%</div>
            <div class="stat-label">邀请码使用率</div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">🚀 快速操作</h2>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        <div style="background: rgba(102, 126, 234, 0.05); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #667eea;">
            <h3 style="margin: 0 0 1rem 0; color: #667eea; font-size: 1.1rem;">👥 用户管理</h3>
            <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">管理系统用户和权限</p>
            <a href="{{ url_for('admin.users') }}" class="btn btn-sm">查看用户</a>
        </div>
        
        <div style="background: rgba(40, 167, 69, 0.05); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #28a745;">
            <h3 style="margin: 0 0 1rem 0; color: #28a745; font-size: 1.1rem;">🔑 激活码管理</h3>
            <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">生成和管理激活码</p>
            <a href="{{ url_for('admin.activation_codes') }}" class="btn btn-success btn-sm">管理激活码</a>
        </div>
        
        <div style="background: rgba(255, 193, 7, 0.05); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #ffc107;">
            <h3 style="margin: 0 0 1rem 0; color: #ffc107; font-size: 1.1rem;">🎫 邀请码管理</h3>
            <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">生成和管理邀请码</p>
            <a href="{{ url_for('admin.invite_codes') }}" class="btn" style="background: linear-gradient(135deg, #ffc107 0%, #ff8c00 100%);" class="btn-sm">管理邀请码</a>
        </div>
        
        <div style="background: rgba(23, 162, 184, 0.05); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #17a2b8;">
            <h3 style="margin: 0 0 1rem 0; color: #17a2b8; font-size: 1.1rem;">🤝 邀请关系</h3>
            <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">查看用户邀请关系</p>
            <a href="{{ url_for('admin.user_invites') }}" class="btn" style="background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);" class="btn-sm">查看关系</a>
        </div>
        
        <div style="background: rgba(111, 66, 193, 0.05); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #6f42c1;">
            <h3 style="margin: 0 0 1rem 0; color: #6f42c1; font-size: 1.1rem;">⚙️ 系统配置</h3>
            <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">配置系统参数</p>
            <a href="{{ url_for('admin.system_config') }}" class="btn" style="background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%);" class="btn-sm">系统设置</a>
        </div>
        
        <div style="background: rgba(220, 53, 69, 0.05); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #dc3545;">
            <h3 style="margin: 0 0 1rem 0; color: #dc3545; font-size: 1.1rem;">📊 预测记录</h3>
            <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">查看预测历史记录</p>
            <a href="#" class="btn btn-danger btn-sm">查看记录</a>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">📈 最近活动</h2>
    </div>
    
    <div style="color: #666; text-align: center; padding: 2rem;">
        <div style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;">📊</div>
        <p>暂无最近活动记录</p>
        <p style="font-size: 0.9rem; margin-top: 0.5rem;">用户操作和系统事件将在这里显示</p>
    </div>
</div>
{% endblock %}