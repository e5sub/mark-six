# 邀请注册系统使用说明

## 🎯 功能概述

邀请注册系统已成功集成到您的六合彩预测系统中，支持用户通过邀请码注册并获得奖励。

## 📋 主要功能

### 1. 邀请码注册
- 新用户注册时可输入邀请码
- 使用邀请码注册成功后，邀请人和被邀请人各获得1天有效期
- 被邀请人首次激活时，邀请人还会获得被邀请人有效期一半的奖励时间（仅限一次）

### 2. 管理员功能
- **邀请码管理**：生成、查看、删除邀请码
- **邀请关系管理**：查看所有邀请统计和用户关系
- **批量操作**：支持批量生成邀请码

### 3. 用户功能
- **生成邀请码**：每天最多生成3个邀请码，有效期7天
- **邀请统计**：查看邀请成功数、激活用户数、成功率等
- **邀请记录**：查看自己创建的邀请码使用情况

## 🚀 使用方法

### 管理员操作
1. 登录管理后台
2. 点击"邀请码管理"菜单
3. 可以生成新邀请码、查看使用情况
4. 在"邀请关系"页面查看整体邀请数据

### 普通用户操作
1. 登录用户中心
2. 点击"我的邀请码"菜单
3. 生成邀请码并分享给朋友
4. 查看邀请统计和被邀请用户列表

### 新用户注册
1. 访问注册页面
2. 填写基本信息
3. 在"邀请码"字段输入邀请码（可选）
4. 完成注册即可获得奖励

## 🔧 数据库更新

### 自动更新
系统启动时会自动检查并更新数据库结构，无需手动操作。

### 手动更新
如果需要手动更新数据库，可以运行以下脚本：

```bash
# 完整的数据库更新脚本（包含备份功能）
python update_database_for_invite.py

# 或者运行初始化脚本
python init_invite_system.py
```

## 📊 数据库变更

### User表新增字段
- `invited_by`: 邀请人用户名
- `invite_code_used`: 使用的邀请码
- `invite_activated_at`: 邀请激活时间

### 新增InviteCode表
- `id`: 主键
- `code`: 邀请码
- `created_by`: 创建者
- `created_at`: 创建时间
- `expires_at`: 过期时间
- `is_used`: 是否已使用
- `used_by`: 使用者
- `used_at`: 使用时间
- `max_uses`: 最大使用次数
- `current_uses`: 当前使用次数

## ⚙️ 配置说明

### 邀请码限制
- 每个用户每天最多生成3个邀请码
- 邀请码默认有效期为7天
- 每个邀请码只能使用一次
- 不能使用自己创建的邀请码

### 奖励机制
- **注册奖励**：使用邀请码注册，邀请人和被邀请人各获得1天有效期
- **激活奖励**：被邀请人首次激活时，邀请人额外获得被邀请人有效期一半的时间（仅限一次）

## 🛡️ 安全特性

- 防止自己邀请自己
- 防止重复使用邀请码
- 邀请码过期自动失效
- 完整的使用记录和统计

## 📱 界面特点

- 响应式设计，支持移动端
- 美观的玻璃拟态UI风格
- 直观的数据统计展示
- 便捷的复制分享功能

## 🔍 故障排除

### 常见问题

1. **邀请码无效**
   - 检查邀请码是否过期
   - 确认邀请码未被使用
   - 验证邀请码格式是否正确

2. **无法生成邀请码**
   - 检查是否达到每日生成限制（3个）
   - 确认用户账号已激活

3. **奖励未到账**
   - 检查邀请码使用记录
   - 确认被邀请人已完成注册
   - 查看用户有效期变化

### 日志查看
系统会在控制台输出相关操作日志，可以通过日志排查问题。

## 📞 技术支持

如有问题，请检查：
1. 数据库连接是否正常
2. 相关表和字段是否存在
3. 用户权限是否正确
4. 系统日志中的错误信息

---

🎉 **邀请系统已成功部署，开始邀请好友获得更多使用时间吧！**